<?xml version="1.0" encoding="UTF-8" ?>
<!--
  ~ Copyright (c) 2012. betterFORM Project - http://www.betterform.de
  ~ Licensed under the terms of BSD License
  -->

<!--
    author: Lars Windauer
 -->
<project id="release" name="betterForm Release Targets" default="deploy" basedir=".">

    <!-- **************************************** PROPERTIES **************************************** -->
    <!-- **************************************** PROPERTIES **************************************** -->
    <!-- **************************************** PROPERTIES **************************************** -->
    <!-- ###
          ATTENTION - the properties below must be set before build.properties.xml
          is called - DO NOT MOVE
  ###  -->

    <property name="root.dir" value=".."/>
    <xmlproperty file="../release.properties.xml" semanticAttributes="true" keepRoot="false"/>
    <xmlproperty file="../build.properties.xml" semanticAttributes="true" keepRoot="false"/>
    <property name="relase.name" value="${app.name}-${app.version}"/>
    <property name="target.dir" value="${basedir}/target"/>

    <target name="deploy" description="default deployment as single jar">
        <ant antfile="build.xml" inheritall="true" target="deploy"/>
    </target>

    <target name="release" description="creates betterFORM release in web/target">
        <zip description="create betterform zip "
             zipfile="${target.dir}/${relase.name}.zip"
             basedir="${target.dir}/${app.name}"/>

        <tar destfile="${target.dir}/${relase.name}.tar.gz" compression="gzip">
            <zipfileset src="${target.dir}/${relase.name}.zip"/>
        </tar>
    </target>
</project>
