<?xml version="1.0" encoding="UTF-8"?>
<html xmlns:xf="http://www.w3.org/2002/xforms"
      xmlns:ev="http://www.w3.org/2001/xml-events">
    <head>
        <title>Registration </title>
        <!--
        ~ Copyright (c) 2012. betterFORM Project - http://www.betterform.de
        ~ Licensed under the terms of BSD License
        -->

    </head>
    <body>
        <div id="xforms">
            <div id="registration" class="InlineRoundBordersAlert">
                <div style="display:none" id="xf1">
                    <xf:model id="m-registration">
                        <xf:instance src="registration.xml" xmlns=""/>

                        <xf:bind nodeset="alias" constraint="string-length(.) &gt; 3" required="true()"/>
                        <xf:bind nodeset="email" type="email" constraint="string-length(.) &gt; 3" required="true()"/>
                        <xf:bind nodeset="pass1" constraint="string-length(.) &gt;= 6" required="true()"/>
                        <xf:bind nodeset="pass2" constraint=". = ../pass1" required="true()"/>
                        <xf:bind nodeset="agreement" type="boolean" />

                        <xf:submission id="s-send"
                                       replace="instance"
                                       resource="echo:test"
                                       method="get">
                            <xf:action ev:event="xforms-submit-error">
                                <xf:message>Registration failed. Please fill in valid values</xf:message>
                            </xf:action>
                            <xf:action ev:event="xforms-submit-done">
                                <xf:message>You have been registered successfully.</xf:message>
                            </xf:action>
                        </xf:submission>

                        <!--
                        Option 1:
                        move all actions that you usually kept as direct childs of UI control into the model.
                        -->
                        <xf:action ev:event="xforms-value-changed" ev:target="firstname">
                            <xf:message level="ephemeral">Hello <xf:output ref="firstname"/></xf:message>
                        </xf:action>
                    </xf:model>
                </div>

                <!-- option 1: mapping xf actions to data attributes -->
                <span data-xf-action="{target:'#firstname',event:'xforms-value-changed'}">
                    <span data-xf-message="{'hello'+ xp.get('firstname'), ephemeral:true}"></span>
                    <!-- ... further actions ... -->
                </span>

                <!-- option 2: using a js API -->
                <script type="text/javascript">
                    <!-- assuming that 'xp' the XForms processor is in scope here  - pseudo code -->
                    xp.listen('firstname','xforms-value-changed', function(){
                        xp.message("hello " + xp.get("firstname"), true);
                        // ... further actions ...
                    });
                </script>

                <!-- option 3: extension elements instead -->
                <x-action event="xforms-value-changed" target="firstname" [observer="",propagate="",...]>
                    <x-message ephemeral>Hello</x-message>
                </x-action>

                <form>
                    <label for="firstname">First Name:</label>
                    <input id="firstname" type="text" value="" data-xf-ref="firstname"/>
                </form>
            </div>
        </div>
    </body>
</html>