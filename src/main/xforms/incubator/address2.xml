<?xml version="1.0" encoding="ISO-8859-1"?>
<div
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xf="http://www.w3.org/2002/xforms"
      xmlns:ev="http://www.w3.org/2001/xml-events"
        xmlns:bffn="java:de.betterform.xml.xforms.xpath.BetterFormXPathFunctions">
        <xf:model id="address" ev:event="xforms-revalidate" ev:defaultAction="cancel">


            <xf:instance id="default">
                <address xmlns="">
                    <street/>
                    <city/>
                    <zip>123456</zip>
                    <country>germany</country>
                </address>
            </xf:instance>
            <xf:bind nodeset="zip" required="true()" type="integer"/>

            <xf:submission id="s-load-from-master"
                           resource="model:master#instance('contact')/data/postaladdress[@id='2']"
                           replace="instance"
                           method="get"/>
            <xf:submission id="s-update-master"
                           resource="model:master#instance('contact')/data/postaladdress[@id='2']"
                           replace="none"
                           method="post"/>

            <xf:send ev:event="xforms-ready" submission="s-load-from-master"/>
        </xf:model>
        <xf:group appearance="full">
            <xf:action ev:event="betterform-variable-changed" ev:observer="contact">
                <xf:message>it worked</xf:message>
            </xf:action>
            <xf:label>
                Address
                <br/>
            </xf:label>
            <xf:input ref="street">
                <xf:label id="street">Street</xf:label>
            </xf:input>
            <xf:input ref="city">
                <xf:label id="city-lbl">City</xf:label>
            </xf:input>
            <xf:input ref="zip">
                <xf:label id="zip-lbl">Zip</xf:label>
                <xf:alert>Please put your ZIP code here</xf:alert>
            </xf:input>
            <xf:select1  appearance="minimal" ref="country">
                <xf:label id="country-lbl">Country</xf:label>
                <xf:choices id="C-38">
                    <xf:item selected="false">
                        <xf:label>Albania</xf:label>
                        <xf:value>albania</xf:value>
                    </xf:item>
                    <xf:item selected="false">
                        <xf:label>Belgium</xf:label>
                        <xf:value>belgium</xf:value>
                    </xf:item>
                    <xf:item selected="false">
                        <xf:label>Cuba</xf:label>
                        <xf:value>cuba</xf:value>
                    </xf:item>
                    <xf:item selected="false">
                        <xf:label>Denmark</xf:label>
                        <xf:value>denmark</xf:value>
                    </xf:item>
                    <xf:item selected="false">
                        <xf:label>Estonia</xf:label>
                        <xf:value>estonia</xf:value>
                    </xf:item>
                    <xf:item selected="false">
                        <xf:label>France</xf:label>
                        <xf:value>france</xf:value>
                    </xf:item>
                    <xf:item selected="true">
                        <xf:label>Germany</xf:label>
                        <xf:value>germany</xf:value>
                    </xf:item>
                    <xf:item selected="false">
                        <xf:label>Gibraltar</xf:label>
                        <xf:value>gibraltar</xf:value>
                    </xf:item>
                    <xf:item selected="false">
                        <xf:label>Hungary</xf:label>
                        <xf:value>hungary</xf:value>
                    </xf:item>
                    <xf:item selected="false">
                        <xf:label>Italy</xf:label>
                        <xf:value>italy</xf:value>
                    </xf:item>
                    <xf:item selected="false">
                        <xf:label>Japan</xf:label>
                        <xf:value>japan</xf:value>
                    </xf:item>
                </xf:choices>
            </xf:select1>

            <xf:trigger>
                <xf:label>load data from master</xf:label>
                <xf:send submission="s-load-from-master"/>
            </xf:trigger>
            <xf:trigger>
                <xf:label>update master</xf:label>
                <xf:send submission="s-update-master"/>
            </xf:trigger>
        </xf:group>
</div>
