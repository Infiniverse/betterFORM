<!--
  ~ Copyright (c) 2010. betterForm Project - http://www.betterform.de
  ~ Licensed under the terms of BSD License
  -->

<project name="betterFORM reference generator" default="deploy-forms" basedir=".">
    <xmlproperty file="../build.properties.xml" semanticAttributes="true" keepRoot="false"/>
    <property name="core.dir" value="${basedir}../../../core"/>    

    <path id="generator.libs" description="classpath for compiling core classes">
        <pathelement location="${core.dir}/src/main/lib/saxon-9.2.1.5.jar"/>        
    </path>


    <target name="build">
        <xslt basedir="${basedir}/xml"
              destdir="${basedir}/target"
              style="${basedir}/build-forms.xsl"
              force="true"
              includes="*.xml"
              extension=".xhtml">
            <classpath refid="generator.libs"/>
        </xslt>
    </target>

    <target name="extract">
        <mkdir dir="xml"/>
    </target>

    <target name="deploy-forms" depends="build" description="builds and deploys reference forms">
        <copy todir="../../src/main/xforms/reference/">
            <fileset dir="target">
                <include name="*.xhtml"/>
            </fileset>
        </copy>

        <ant antfile="build.xml" target="deploy-resources" dir="../../web/"/>
    </target>
</project>
