<polymer-element name="fore-xml-instance" >
<!--
    <template>
        <fore-node name="foo">
            <fore-property name="readonly">false</fore-node>
            <fore-property name="required">false</fore-node>
            <fore-property name="value">the content of this node</fore-property>
            <fore-property name="myProp">custom property</fore-property>
            <fore-node>
                ....
            </fore-node>
        </fore-node>
    </template>
-->

    <script>




        Polymer('fore-xml-instance', {

            ready: function() {
                console.log("#### initializing xml instance ...");
//                var myself = wrap(this);
                console.log("parent",this.parentNode);
                var controls = document.querySelectorAll('body *[name]');
                console.log('Controls with name attribute: ', controls);

                var data = document.createElement('data');
                for(var i = 0; i < controls.length; i++) {
                    console.log('>>> element with name: ',controls[i]);
                     var control = controls[i];
                     var name = control.getAttribute('name');
                     console.log('Creating instance element: ', name);
                     var instanceElement = document.createElement(name);

                     var value = '';
                     if(control.getAttribute('value') !== null) {
                         value = control.getAttribute('value');
                         instanceElement.appendChild(document.createTextNode(value));
                     }
                     data.appendChild(instanceElement);

                 }

                this.appendChild(data);

//                console.log('INSTANCE: ', this.instance);
            },

            setForm:function(form){
                this.myForm = form;
            },
            setValue:function(newVal){
                //document.querySelector("foo2").innerHTML=newVal;
            },



            getInstance: function() {
//                console.log('INSTANCE getInstance(): ', this.instance);
                return this.model;
            }
        });
    </script>
</polymer-element>