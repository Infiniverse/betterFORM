<polymer-element name="fore-bind" constructor="ForeBind" attributes="ref debug readonly">
    
    <template if="{{ debug }}">
        <fore-calculate expr="{{calculateExpr}}"></fore-calculate>
        <fore-readonly expr="{{readonly}}"></fore-readonly>
        <fore-required expr="{{required}}"></fore-required>
        <fore-valid expr="{{valid}}"></fore-valid>
        <fore-relevant expr="{{relevant}}"></fore-relevant>
        <fore-type expr="{{datatype}}"></fore-type>

<!--
        <property type="calculate" expr="{{calculateExpr}}" value="123"></property>
        <property type="readonly" expr="false" value="false"></property>
        <property type="required" expr="false" value="false"></property>
        <property type="relevant" expr="true" value="true"></property>
        <property type="valid" expr="true" value="true"></property>
        <property type="type" expr="string" value="text"></property>
-->
        <!--
        <calculate>{{calculateExpr}}</calculate>
        <readonly>{{readonlyExpr}}</readonly>
        <required>{{requiredExpr}}</required>
        <relevant>{{relevantExpr}}</relevant>
        <type>{{datatypeExpr}}</type>
        <constraint>{{validExpr}}</constraint>
        -->
    </template>
    <script>
        Polymer('fore-bind', {

            // static expressions
            ref: '',
            calculate: '',
            readonly: '',
            required: '',
            relevant: '',
            valid: '',
            datatype: 'string',



            /**
             * this object holds the current, evaluated state
             */
            state:{
                readonly:false,
                required:false,
                relevant:true,
                valid:true,
                dataType:'string'
            },



            created: function () {
                console.log("fore-bind created ...");
                this.debug='false';
            },

            ready: function () {
                 //this.bind('calculate', this, 'calculateExpr');
//                console.log('XXX: ', Object.keys(this));

            },

            enteredView: function () {
                console.log("AbsoluteRef: ", this.getRef());
            },

            getRef: function () {
                var absoluteRef = this.ref;
                var node = this;
                while (node.parentNode.host !== undefined && node.parentNode.host.tagName === 'FORE-BIND') {
                    absoluteRef = node.parentNode.host.ref + '.' + absoluteRef;
                    node = node.parentNode.host;
                }
                return absoluteRef;
            }
        });
    </script>
</polymer-element>