<?xml version="1.0" encoding="UTF-8"?>
<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:xf="http://www.w3.org/2002/xforms"
        xmlns:ev="http://www.w3.org/2001/xml-events"
        >
<head>
    <title>Ant Submission Handler</title>
    <!--
      ~ Copyright (c) 2012. betterFORM Project - http://www.betterform.de
      ~ Licensed under the terms of BSD License
    -->
    <!--
         Standard template for embedded forms. Uses an additional div Element with @id="xforms" to allow addressing
         by a xforms load action.
         -->
</head>
<body>
<div id="xforms">
    <div style="display:none">
        <xf:model id="model-1">
            <xf:instance id="i-default">
                <data xmlns=""/>
            </xf:instance>

            <xf:instance id="i-target">
                <data xmlns="">
                    <target>test</target>
                </data>
            </xf:instance>
            <xf:instance xmlns="" id="i-result">
                <data/>
            </xf:instance>

            <xf:submission id="s-ant-default-target"
                           method="get"
                           replace="instance"
                           instance="i-result"
                           ref="instance()"
                           validate="false"
                           resource="ant://{$webapp.realpath}/forms/test/antsubmission-handler-test.xml">
                <xf:action ev:event="xforms-submit-error">
                    <xf:message>Submission failed</xf:message>
                </xf:action>
            </xf:submission>
            <xf:submission id="s-ant-instance-target"
                           method="get"
                           replace="instance"
                           instance="i-result"
                           ref="instance('i-target')"
                           validate="false"
                           resource="ant://{$webapp.realpath}/forms/test/antsubmission-handler-test.xml">
                <xf:action ev:event="xforms-submit-error">
                    <xf:message>Submission failed</xf:message>
                </xf:action>
            </xf:submission>

            <xf:submission id="s-ant-uri-target"
                           method="get"
                           replace="instance"
                           instance="i-result"
                           ref="instance()"
                           validate="false"
                           resource="ant://{$webapp.realpath}/forms/test/antsubmission-handler-test.xml#test2">
                <xf:action ev:event="xforms-submit-error">
                    <xf:message>Submission failed</xf:message>
                </xf:action>
            </xf:submission>
        </xf:model>
    </div>
    <xf:group appearance="full">
        <xf:trigger>
            <xf:label>Run Ant with default target</xf:label>
            <xf:send submission="s-ant-default-target"/>
        </xf:trigger>
        <xf:trigger>
            <xf:label>Run Ant with instance target</xf:label>
            <xf:send submission="s-ant-instance-target"/>
        </xf:trigger>
        <xf:trigger>
            <xf:label>Run Ant with uri target (# fragment)</xf:label>
            <xf:send submission="s-ant-uri-target"/>
        </xf:trigger>
    </xf:group>

    <xf:group appearance="full" ref="instance('i-result')">
        <xf:label>Ant Result</xf:label>
        <xf:output ref="instance('i-result')/buildFile">
            <xf:label>Build File:</xf:label>
        </xf:output>
        <xf:output ref="instance('i-result')/target">
            <xf:label>Ant Target:</xf:label>
        </xf:output>
        <xf:output ref="instance('i-result')/output-stream">
            <xf:label>Output Stream:</xf:label>
        </xf:output>
        <xf:output ref="instance('i-result')/error-stream">
            <xf:label>Error Stream:</xf:label>
        </xf:output>
    </xf:group>
</div>
</body>
</html>
